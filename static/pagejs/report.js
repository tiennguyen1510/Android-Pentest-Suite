function load_chart(app_name) {
    var url = window.location.origin + "/report/data/" + app_name;
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
        var result = JSON.parse(this.responseText);
        //var result = this.responseText;
        console.log(result);

        var barChartData = {
            labels: ["Qark", "Dependency Check", "Andro Bugs"],
            datasets: [
                {
                    fillColor: "rgb(211, 55, 36)",
                    strokeColor: "rgba(220,220,220,0.8)",
                    highlightFill: "rgb(221, 75, 57)",
                    highlightStroke: "rgba(220,220,220,1)",
                    data: result["high"]
                },
                {
                    fillColor: "rgb(219, 139, 11)",
                    strokeColor: "rgba(151,187,205,0.8)",
                    highlightFill: "rgb(243, 156, 18)",
                    highlightStroke: "rgba(151,187,205,1)",
                    data: result["medium"]
                },
                {
                    fillColor: "rgb(0, 141, 76)",
                    strokeColor: "rgba(151,187,205,0.8)",
                    highlightFill: "rgb(0, 166, 90)",
                    highlightStroke: "rgba(151,187,205,1)",
                    data: result["low"]
                }
            ]
        }

        var ctx = document.getElementById(app_name + "_vul_chart").getContext("2d");
        window.myBar = new Chart(ctx).Bar(barChartData, {
            responsive: true
        });

        var doughnutData = {
            type: 'bar',
            labels: ["Source code", "Resource"],
            datasets: [
                {
                    fillColor: "#3e95cd",
                    data: [result["sensitive"][0], result["sensitive"][1]]
                }
            ]
        }     

        var ctx = document.getElementById(app_name + "_sen_chart").getContext("2d");
        window.myDoughnut = new Chart(ctx).Bar(doughnutData, {
            responsive: true
        });
    }

    xhttp.open("GET", url, true);
    xhttp.send();
}

function load_all_chart(app_list) {
    var lst = app_list.split("&#39;");
    for (var i = 0; i < lst.length; i++) {
        if (lst[i] != '[' || lst[i] != ']' || lst[i] != ',') {
            load_chart(lst[i]);
        }
    }
}